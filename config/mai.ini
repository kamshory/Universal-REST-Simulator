PATH=/biller/mai

METHOD=GET

REQUEST_TYPE=application/x-www-form-urlencoded

RESPONSE_TYPE=application/json

PARSING_RULE=\
$INPUT.PRODUCT=$REQUEST.product_code\
$INPUT.ACCOUNT=$REQUEST.customer_no\
$INPUT.REF_NUMBER=$REQUEST.refno

TRANSACTION_RULE=\
IF ($INPUT.PRODUCT == "10000" && $INPUT.ACCOUNT == "081266612126")\
THEN $DELAY=0\
$OUTPUT=\
{\
	"rc":"00",\
	"sn":"82634862385235365285",\
	"nama":"Kamshory",\
	"customer_no":"$INPUT.ACCOUNT",\
	"product_code":"$INPUT.PRODUCT",\
	"time_stamp":"$DATE('j F Y H:i:s', 'UTC+7')",\
	"msg":"Transaksi ini dikenakan biaya Rp. 250",\
	"refid":"$INPUT.REF_NUMBER"\
}\
ENDIF\
IF ($INPUT.PRODUCT == "10001" && $INPUT.ACCOUNT == "081266612127")\
THEN $DELAY=20000\
$OUTPUT=\
{\
	"rc":"00",\
	"sn":"82634862385235365285",\
	"nama":"Budi",\
	"customer_no":"$INPUT.ACCOUNT",\
	"product_code":"$INPUT.PRODUCT",\
	"time_stamp":"$DATE('Y-m-d H:i:s')",\
	"msg":"Transaksi ini dikenakan biaya Rp. 250",\
	"refid":"873264832658723585"\
}\
ENDIF\
IF (true)\
THEN $DELAY=0\
$OUTPUT=\
{\
	"rc":"25",\
	"sn":"82634862385235365285",\
	"nama":"Budi",\
	"customer_no":"$INPUT.ACCOUNT",\
	"product_code":"$INPUT.PRODUCT",\
	"time_stamp":"$DATE('Y-m-d H:i:s')",\
	"msg":"Nomor tidak ditemukan",\
	"refid":"873264832658723585"\
}\
ENDIF\

