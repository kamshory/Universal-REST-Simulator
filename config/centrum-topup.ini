PATH=/centrum2/pay

METHOD=POST

REQUEST_TYPE=application/xml

RESPONSE_TYPE=application/xml

PARSING_RULE=\
$INPUT.METHODNAME=$REQUEST[topUpRequest]\
$INPUT.MSISDN=$REQUEST[params][param][value][struct][member][0][value][string]\
$INPUT.REQUESTID=$REQUEST[params][param][value][struct][member][1][value][string]

TRANSACTION_RULE=\
{[IF]} (true)\
{[THEN]}\
$OUTPUT.STATUS=200 OK\
$OUTPUT.DELAY=10\
$OUTPUT.CALLBACK_URL=https://10.35.12.131/biller-centrum/process-callback\
$OUTPUT.CALLBACK_METHOD=POST\
$OUTPUT.CALLBACK_TYPE=application/json\
$OUTPUT.CALLBACK_HEADER=X-Server-Name: Universal REST Simulator\
Host: api-qa.altopay.id\
$OUTPUT.CALLBACK_BODY=\
<?xml version="1.0"?>\
<methodResponse>\
    <params>\
        <param>\
            <value>\
                <struct>\
                    <member>\
                        <name>RESPONSECODE</name>\
                        <value>\
                            <string>00</string>\
                        </value>\
                    </member>\
                    <member>\
                        <name>REQUESTID</name>\
                        <value>\
                            <string>$INPUT.REQUESTID</string>\
                        </value>\
                    </member>\
                    <member>\
                        <name>MESSAGE</name>\
                        <value>\
                            <string>TOP UP BERHASIL</string>\
                        </value>\
                    </member>\
                    <member>\
                        <name>TRANSACTIONID</name>\
                        <value>\
                            <string>666333</string>\
                        </value>\
                    </member>\
                </struct>\
            </value>\
        </param>\
    </params>\
</methodResponse>\
$OUTPUT.BODY=<?xml version="1.0"?>\
<methodResponse>\
	<params>\
		<param>\
		<value>\
			<struct>\
				<member>\
					<name>RESPONSECODE</name>\
					<value>\
						<string>68</string>\
					</value>\
				</member>\
				<member>\
					<name>REQUESTID</name>\
					<value>\
						<string>$DATE('His')</string>\
					</value>\
				</member>\
				<member>\
					<name>MESSAGE</name>\
					<value>\
						<string>TRX I5.{[|]}$INPUT.MSISDN BERHASIL, HRG:5.400 SN: 1169076472. SISA SALDO:48.670.962</string>\
					</value>\
				</member>\
				<member>\
					<name>TRANSACTIONID</name>\
					<value>\
						<string>$DATE('His')</string>\
					</value>\
				</member>\
			</struct>\
		</value>\
		</param>\
	</params>\
</methodResponse>\
{[ENDIF]}
