PATH=/universal-simulator/va-inquiry

METHOD=POST

REQUEST_TYPE=application/json

RESPONSE_TYPE=application/json

PARSING_RULE=\
$INPUT.USERNAME=$AUTHORIZATION_BASIC.USERNAME\
$INPUT.PASSWORD=$AUTHORIZATION_BASIC.PASSWORD\
$INPUT.COMMAND=$REQUEST.command\
$INPUT.VA_NUMBER=$REQUEST.data.virtual_account_number\
$INPUT.REQUEST_ID=$REQUEST.data.request_id\
$INPUT.PG_CODE=$REQUEST.data.pg_code\
$INPUT.REF_NUMBER=$REQUEST.data.reference_number\
$INPUT.CUST_NUMBER=$REQUEST.data.customer_number\
$INPUT.BANK_CODE=$REQUEST.data.bank_code\
$INPUT.CHANNEL_TYPE=$REQUEST.data.channel_type

TRANSACTION_RULE=\
{[IF]} ($INPUT.CUST_NUMBER == "1571200004")\
{[THEN]}\
$OUTPUT.DELAY=0\
$OUTPUT.BODY={\
    "command": "$INPUT.COMMAND",\
    "response_code": "00",\
    "response_text": "Success",\
    "message": {\
        "id": "Sukses",\
        "en": "Success"\
    },\
    "data": {\
        "bank_code": "$INPUT.BANK_CODE",\
        "channel_type": "$INPUT.CHANNEL_TYPE",\
        "merchant_code": "030",\
        "merchant_name": "Arta Pay",\
        "pg_code": "$INPUT.PG_CODE",\
        "virtual_account_number": "$INPUT.VA_NUMBER",\
        "request_id": "$INPUT.REQUEST_ID",\
        "reference_number": "$INPUT.REF_NUMBER",\
        "time_stamp": "$DATE('Y-m-d\TH:i:s', 'UTC').000Z",\
        "customer_name": "Pipit",\
        "customer_number": "$INPUT.CUST_NUMBER",\
        "customer_phone": "",\
        "customer_email": "",\
        "currency_code": "IDR",\
        "total_amount": 570000,\
        "bill_list": [\
            {\
                "bill_number": "17",\
                "bill_amount": 570000,\
                "bill_max_amount": 0,\
                "bill_min_amount": 0,\
                "bill_description": {\
                    "id": "Kipas Angin",\
                    "en": "Fan"\
                }\
            }\
        ]\
    }\
}\
{[ENDIF]}\
{[IF]} (true)\
{[THEN]}\
$OUTPUT.DELAY=0\
$OUTPUT.BODY={\
    "command": "$INPUT.COMMAND",\
    "response_code": "04",\
    "response_text": "Not found",\
    "message": {\
        "id": "Nomor VA tidak ditemukan",\
        "en": "VA number not found"\
    },\
    "data": {\
        "bank_code": "$INPUT.BANK_CODE",\
        "channel_type": "$INPUT.CHANNEL_TYPE",\
        "merchant_code": "030",\
        "merchant_name": "Arta Pay",\
        "pg_code": "$INPUT.PG_CODE",\
        "virtual_account_number": "$INPUT.VA_NUMBER",\
        "request_id": "$INPUT.REQUEST_ID",\
        "reference_number": "$INPUT.REF_NUMBER",\
        "time_stamp": "$DATE('Y-m-d\TH:i:s', 'UTC').000Z",\
        "customer_name": "",\
        "customer_number": "$INPUT.CUST_NUMBER",\
        "customer_phone": "",\
        "customer_email": "",\
        "currency_code": "IDR",\
        "total_amount": 0,\
        "bill_list": null\
    }\
}\
{[ENDIF]}